node cumulative_sum (i:int) returns (t:int)
let
  t = (0 fby t) + i;
tel

node count_bananas (banana : bool) returns (n : int)
var count : int when banana;
let
  count = cumulative_sum(1 when banana);
  n = merge banana count (n when not banana);
tel